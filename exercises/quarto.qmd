---
title: "Reproducible report generation with {{< fa brands r-project >}} and `Quarto`"
echo: true
number-sections: true
---

::: {.badge}
<a href="https://datalab.sspcloud.fr/launcher/ide/rstudio?autoLaunch=false&networking.user.enabled=true&onyxia.friendlyName=%C2%ABrstudio-cours-ENS%C2%BB" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Tester%20via%20SSP%20cloud%20-%20SSPCloud?logo=R&labelColor=black&color=%231965b8" alt="Onyxia"></a><br>
:::

<details>
<summary>
Check out the _slides_ below or [click here](/slides/quarto.qmd)
to view the slides in full screen.
</summary>


``` {.yaml code-preview="/slides/quarto.qmd"}
```

</details>
One of the major challenges in research and data analysis is the __transparent__ and __reproducible__ communication of results, as well as __collaboration__.
Reproducible publications offer a solution to this challenge by integrating code, data, and analyses into a format that allows anyone to understand the data processing steps that were implemented and to reproduce the exact results, provided they have the same environment.


`Quarto`, the tool that succeeded to `R Markdown`, makes it possible to produce text documents while natively integrating chunks of `R` code.
This helps streamline the writing process of a publication by greatly reducing the number of manual steps required to include graphics or code in a document: rather than having Stata code that generates Excel/Calc outputs which are then integrated into a Word document or transformed into LaTeX tables, we rely on a single source document that contains both the text and the code that produces the outputs of the final document.

With `Quarto`, we are able to separate content from presentation.
This allows us to focus on the most important aspects: the substance of the analysis. 

An example of such a formatted report is available on [this page](../utils/report.qmd).

::: {.callout-note}
This practical session is less guided than usual in order to give you more freedom
to explore and produce a document.
:::

## Initializing the document

::: {.callout-tip}
## Exercise 1: Creating the file

1. Click on `File > New file > Quarto document`:
    + Provide a title and an author for the report
    + Choose `HTML` as the output format
    + Uncheck the `Use visual markdown editor` option
2. Save the file under the name `report.qmd`.
3. In the file _header_,
modify the publication metadata (title, author, date, etc.)
using some of the options from [this page](https://quarto.org/docs/reference/formats/html.html).
5. Write a first sentence in the body of the document using
one or two elements of `Markdown` syntax for formatting.
For example, make part of the text bold. 
6. Add a level-2 heading (two `#`) to create an `About` section
and write one or two sentences in it.
6. Render the document by clicking on the `Render` button:

![Source: [Hello Quarto! by `Posit`](https://quarto.org/docs/get-started/hello/rstudio.html#rendering) ](https://quarto.org/docs/get-started/hello/images/rstudio-render.png) 

:::


::: {.callout-tip}
## Exercise 2: Inserting `R` outputs

1. Choose one of the chapters we previously worked on
for which we produced a graph or a map.
Reuse the example code from the solution (data import and visualizations)
and insert it into the document.

2. Compile the document. If there are errors, read them carefully and fix them
in order to obtain a reproducible document.

3. Use the `GT` package to create a nice table,
for example a descriptive statistics table (a mean, for instance).
:::


::: {.callout-tip}
## Exercise 3: Styling

Customize the output to obtain an aesthetically pleasing document.
To do so, you may use a template.

:::


::: {.callout-note}
On a `Mac` {{< fa brands apple >}}, some useful characters
are more difficult to type. For example, `|`
can be obtained using the following shortcut:
<kbd>Shift</kbd> + <kbd>Option</kbd> + <kbd>L</kbd>
:::


